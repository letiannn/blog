# **SAE J1939** 系列标准。

## **SAE J1939 系列标准文件简介（商用车网络与控制通信）**

本系列标准定义了中重型商用车（卡车、客车、工程机械、农机、船舶）领域**高速车辆控制局域网**的完整通信体系。它不仅仅是诊断协议，更是一个**基于CAN总线的实时控制和信息共享的“整车操作系统”**。其核心在于让不同供应商的ECU（如发动机、变速箱、ABS、仪表盘）能够像一个集成系统一样协同工作。

### **SAE J1939-01: 一般信息与控制**
*   **核心定位：整个J1939世界的“宪法与总纲”。**
*   **主要内容：**
    1.  **顶层架构：** 阐述了J1939的**范围、目标、核心概念及网络拓扑结构**。它定义了基于CAN 2.0B（29位标识符）的通信模型。
    2.  **地址分配：** 规定了网络中每个ECU的**唯一源地址分配规则和管理机制**，确保无冲突通信。
    3.  **文档总览：** 提供了整个J1939系列所有文件的索引和内容概述，是入门的总地图。
*   **阅读建议：** **理解J1939体系结构的必读起点。**

### **SAE J1939-11: 物理层 - 250K比特/秒，屏蔽双绞线**
*   **核心定位：网络的“高速公路建设标准”（最常用版本）。**
*   **主要内容：**
    1.  **电气特性：** 详细规定了通信介质的**电气参数**，如导线类型、阻抗、终端电阻、电压电平、容错等。
    2.  **连接器规范：** 定义了标准化的**9针或3针 Deutsch HD10 连接器**及其引脚定义。
    3.  **网络拓扑：** 规定了主干线和支线的最大长度、节点数等物理布局要求。
*   **阅读建议：** **硬件工程师、线束设计人员的核心文件。** 确保物理连接的可靠性。

### **SAE J1939-13: 物理层 - 诊断连接器**
*   **核心定位：规定“车辆维修接口”的物理规范。**
*   **主要内容：** 强制规定了商用车用于诊断和编程的**标准9针或6针诊断连接器**的物理尺寸、引脚定义和位置要求。这是连接商用车诊断工具的硬件接口标准。

### **SAE J1939-21: 数据链路层**
*   **核心定位：通信的“交通规则与车辆识别系统”。**
*   **主要内容：**
    1.  **报文格式：** 定义了J1939报文**29位标识符的精确位分配**，包括优先级、保留位、数据页、PDU格式、目标地址、源地址等。这是J1939的**灵魂所在**。
    2.  **传输协议：** 规定了**多包数据传输**（传输协议，TP）的机制，用于传输长数据（如软件刷写）。
    3.  **连接管理：** 描述了请求与响应的通信管理机制。
*   **阅读建议：** **软件和协议开发者的最核心文件。** 它决定了如何构建和解析每一个网络报文。

### **SAE J1939-31: 网络层**
*   **核心定位：管理“跨网段路由”的规则。**
*   **主要内容：** 定义了当车辆存在**多个CAN网段**（如动力总成网、车身网）并通过**网关**互联时，报文如何在不同网段间进行路由和转发。适用于复杂车辆架构。

### **SAE J1939-71: 车辆应用层**
*   **核心定位：整车数据的“标准词典”。**
*   **主要内容：**
    1.  **参数定义：** 定义了数百个**标准化参数**，如发动机转速、车速、冷却液温度、燃油消耗率、油门踏板位置等。
    2.  **报文定义：** 规定了具体功能的**标准报文**及其数据场布局。例如，发动机信息通过“PGN 61444”报文广播，其中第1-2字节就是标准化的发动机转速值。
*   **阅读建议：** **所有应用开发者的核心参考手册。** 它告诉你具体需要什么数据，以及数据在报文的哪个位置。

### **SAE J1939-73: 诊断应用层**
*   **核心定位：商用车诊断的“专用语言”。**
*   **主要内容：**
    1.  **诊断服务：** 定义了商用车专用的诊断信息服务，如**DM1（当前故障码）、DM2（历史故障码）、DM3（清除故障码）** 等。
    2.  **诊断报文：** 规定了诊断请求与响应的报文格式和会话管理。
    3.  **与OBD关系：** 满足重型车OBD法规要求，并比乘用车OBD更复杂。
*   **阅读建议：** **商用车诊断工具开发和维修诊断的核心标准。**

### **SAE J1939-81: 网络管理协议**
*   **核心定位：ECU的“入网与状态管理”协议。**
*   **主要内容：** 规定了ECU上电后如何**声明地址、检测地址冲突并协调解决**，以及如何监控网络中其他ECU的存在状态（“心跳”机制）。

## **核心特点总结（区别于乘用车标准）**
1.  **基于CAN的广播通信：** 核心是**控制器局域网**，ECU主动广播状态，其他ECU根据需要监听，实现高效协同控制。
2.  **参数化设计：** 核心是定义 **“参数组编号”** 和 **“可疑参数编号”** ，而非乘用车的“服务”。
3.  **高度标准化：** 从物理接口到应用数据格式都有严格定义，实现了真正的 **“即插即用”** 和跨品牌互操作性。
4.  **面向控制：** 主要目的是实现**实时车辆控制**（如变速箱根据发动机扭矩换挡），诊断是重要衍生功能。

## **与乘用车标准的类比关系**
| 商用车领域 (SAE J1939) | 乘用车领域 (类比标准) | 说明 |
| :--- | :--- | :--- |
| **J1939-21 数据链路层** | **ISO 11898 (CAN物理/数据链路) + ISO 15765-2 (网络层)** | 定义了基于CAN的通信规则。J1939的PGN/SA概念是其特色。 |
| **J1939-71 车辆应用层** | **ISO 15031-5 (PID定义)** | 定义了全车共享的数据参数。但J1939的参数更丰富、更面向控制。 |
| **J1939-73 诊断应用层** | **ISO 14229-1 (UDS服务) / ISO 15031** | 定义了诊断命令和故障码。但J1939使用DMx报文，而非UDS服务。 |
| **J1939-13 诊断连接器** | **ISO 15031-3 (OBD-16针)** | 规定了物理诊断接口，但针脚和形状不同。 |

**总结：SAE J1939 是一套为重型商用车设计的、基于CAN总线的、高度集成的整车网络通信与控制标准。它不仅是诊断协议，更是实现车辆各系统间智能化协同工作的基础框架，是商用车电子电气架构的支柱。**